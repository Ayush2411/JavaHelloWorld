pipeline {
  agent any
   stages {
      stage('checkout from develop') {
         steps {
           sh label: '', 
           script: 
           '''
           git pull origin master
           '''
         }
      }
      stage('build') {
         steps {
           sh 'mvn clean package'
         }
      }

      stage ('store the jar') {
         steps {
            sh 'cp /var/lib/jenkins/workspace/Hello-world-Java/target/*.jar /home/aditya/aditya/personal/'
         }
      }
      stage('checkout other repo') {
         steps {
           checkout([$class: 'GitSCM', 
           branches: [[name: '*/master']], 
           doGenerateSubmoduleConfigurations: false, 
           extensions: [], 
           submoduleCfg: [],
           userRemoteConfigs: [[url: 'https://github.com/aditya-malviya/Gittest.git']]])           
         }
      }

      stage ('Push the jar to git') {
         steps {
          sh label: '', 
           script: 
           '''
           git pull origin master
           cd /home/aditya/aditya/personal/
           cp *.jar /var/lib/jenkins/workspace/Hello-world-Java/
           git add .
           git commit -m "adding jar files"
           git push origin master
           '''
         }
      }
   }
}
